{{- $glossary := site.GetPage "glossary.md" -}}

{{- $term := .Get 0}}
{{- $displayTerm := .Get 1 | default $term -}}
{{- $term_lc := .Get 0 | lower -}}

{{- $definition := "" -}}

{{- range $key, $value := $glossary.Params.glossary -}}
  {{- if eq (lower $key) $term_lc -}}
    {{- $definition = $value -}}
  {{- end -}}
{{- end -}}

{{- if $definition -}}
    <span class="glossary-term" title="{{ $definition }}" data-title="{{ $definition }}">{{ $displayTerm }}</span>
{{- else -}}
  {{- $displayTerm -}}
{{- end -}}
